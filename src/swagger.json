{
  "openapi": "3.0.1",
  "info": {
    "title": "Colorimage API",
    "description": "Official documentation of the Colorimage API.",
    "version": "1.0.1"
  },
  "servers": [
    {
      "url": "https://colorimage-109-3900.herokuapp.com/"
    },
    {
      "url": "http://localhost:3000"
    }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Log user in.",
        "operationId": "login",
        "requestBody": {
          "description": "Requires the email and the password of the user.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IAuthPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Success. User was logged in successfully. Returns a JWT token with an expiry time.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ISignedJWTResponse"
                },
                "example": {
                  "token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",
                  "expiry": "1d"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized. Invalid email or password (No user was found).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "message": "Invalid email address or password"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected internal server error. This could be due to a problem during JWT token generation.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "message": "Internal Server Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Registers the user using the provided information, if the email or username are not in use.",
        "operationId": "register",
        "requestBody": {
          "description": "Requires the email and the password of the user.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IRegistrationPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Created. User was created and JWT token was signed and returned successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ISignedJWTResponse"
                },
                "example": {
                  "token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",
                  "expires": "1d"
                }
              }
            }
          },
          "400": {
            "description": "Bad request. Invalid format of email or password.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "message": "Invalid format of email or password"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized. Invalid email or password (No user was found).",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "message": "Invalid email address or password"
                }
              }
            }
          },
          "409": {
            "description": "Conflict. Username or email already in use.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "message": "Username or email already in use"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected internal server error. This could be due to a problem during JWT token generation.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "message": "Internal Server Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "IAuthPayload": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "IRegistrationPayload": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "email@provider.com"
          },
          "password": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          }
        }
      },
      "ISignedJWTResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string"
          },
          "expires": {
            "type": "string"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          }
        }
      }
    }
  },
  "security": [
    {
      "securityRequirement": []
    }
  ]
}