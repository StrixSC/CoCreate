<div class="main-container-wrapper">
    <h1>Inscription</h1>
    <form class="form" [formGroup]="registerForm" (submit)="register()">
        <div *ngIf="errorMessage" class="error-flash">
            {{ errorMessage }}
        </div>
        <mat-form-field class="form-field clickable" appearance="outline">
            <mat-label>Courriel</mat-label>
            <input matInput type="email" formControlName="email" placeholder="exemple@courriel.com" />
            <mat-error *ngIf="registerForm.get('email').hasError('required')">
                Ce champ est obligatoire.
            </mat-error>

        </mat-form-field>

        <mat-form-field class="pb-1 form-field clickable" appearance="outline">
            <mat-label>Mot de passe</mat-label>
            <input formControlName="password" [type]="showPassword ? 'text' : 'password'" matInput placeholder="********" />
            <mat-icon class="noselect" matSuffix (click)="showPassword = !showPassword">{{ showPassword ?
                'visibility_off' : 'visibility' }} </mat-icon>
            <mat-hint>Caractères alphanumériques seulement et doit être entre 8 et 256 caractères</mat-hint>
            <mat-error *ngIf="registerForm.get('password').hasError('required')">
                Ce champ est obligatoire.
            </mat-error>
            <mat-error *ngIf="registerForm.get('password').hasError('minlength')">
                Le mot de passe doit être entre 8 et 256 caractères.
            </mat-error>
            <mat-error *ngIf="registerForm.get('password').hasError('maxLength')">
                Le mot de passe doit être maximum 256 caractères
            </mat-error>
        </mat-form-field>

        <mat-form-field class="pb-1 form-field clickable" appearance="outline">
            <mat-label>Nom d'utilisateur</mat-label>
            <input type="text" formControlName="username" matInput placeholder="Picasso123" />
            <mat-hint>Caractères alphanumériques seulement</mat-hint>
            <mat-error *ngIf="registerForm.get('username').hasError('required')">
                Ce champ est obligatoire.
            </mat-error>
            <mat-error *ngIf="registerForm.get('username').hasError('minlength')">
                Le nom d'utilisateur doit être entre 4 et 256 caractères.
            </mat-error>
            <mat-error *ngIf="registerForm.get('username').hasError('maxlength')">
                Le nom d'utilisateur doit être entre 4 et 256 caractères.
            </mat-error>
        </mat-form-field>

        <mat-form-field class="form-field clickable" appearance="outline">
            <mat-label>Prénom</mat-label>
            <input type="text" formControlName="firstName" matInput placeholder="John" />
            <mat-error *ngIf="registerForm.get('firstName').hasError('required')">
                Ce champ est obligatoire.
            </mat-error>
        </mat-form-field>

        <mat-form-field class="form-field clickable pb-1" appearance="outline">
            <mat-label>Surnom</mat-label>
            <input type="text" formControlName="lastName" matInput placeholder="Doe" />
            <mat-error *ngIf="registerForm.get('lastName').hasError('required')">
                Ce champ est obligatoire.
            </mat-error>
        </mat-form-field>

        <div>
            <button color="primary" class="form-field" type="submit" mat-raised-button>
                <mat-spinner *ngIf="isLoading" class="spinner"></mat-spinner>
                <ng-container *ngIf="!isLoading">Inscription</ng-container>
            </button>
        </div>
        <div class="pt-1">
            <button color="cancel" class="form-field" mat-raised-button routerLink="/auth/menu">Retour</button>
        </div>

        <div class="pt-2">
            <span>
                Déjà un compte? <u class="link clickable" routerLink="/auth/login">Connectez-vous</u>
            </span>
        </div>
    </form>

</div>

<style>
    h1 {
        font-size: 2rem;
    }

    .form-field {
        min-width: 300px;
    }

    .main-container-wrapper {
        gap: 0rem;
        align-items: flex-start;
        padding-top: 3rem;
    }

    .form {
        display: flex;
        flex-direction: column;
    }
</style>